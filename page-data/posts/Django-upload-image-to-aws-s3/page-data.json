{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/Django-upload-image-to-aws-s3","webpackCompilationHash":"d0a82601c2e930c7b229","result":{"data":{"markdownRemark":{"id":"bdaab9ac-a134-5668-b1d1-2b61d2863c2c","html":"<p>After receiving an image file from a client, you have to use a server to upload the image to AWS S3. I am not going to post about how to set up IAM and S3 Bucket in AWS as I believe there are already so many posts about it.</p>\n<p>If you want to upload an image to AWS S3, you need to first install <code class=\"language-text\">boto3</code>, which is a library that helps you upload a file to AWS S3.</p>\n<p><code class=\"language-text\">pip install boto3</code> <br>\nand please build a habit of <code class=\"language-text\">pip freeze &gt; requirements.txt</code> in order to help those who are working on the same project with you.</p>\n<p>Check out the code below</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import boto3\n\n...\n\nclass UploadPictureView(APIView):\n    permission_classes = [IsAuthenticated]\n    s3_client = boto3.client(\n        &#39;s3&#39;,\n        aws_access_key_id     = yptest_aws_access_key_id,\n        aws_secret_access_key = yptest_aws_secret_access_key\n    )\n\n    def post(self, request):\n        picture = request.FILES[&#39;image&#39;]\n        picture.name = f&quot;{request.user.id}_{picture.name}&quot;\n\n        self.s3_client.upload_fileobj(\n            picture,\n            &quot;yptest-sns&quot;,\n            picture.name,\n        )\n\n        return JsonResponse({\n            &quot;picture_uri&quot;: f&quot;https://yptest-sns.s3.ap-northeast-2.amazonaws.com/{picture}&quot;\n        }, safe=False)</code></pre></div>\n<p>You can retrieve your <code class=\"language-text\">aws_access_key_id</code> and <code class=\"language-text\">aws_secret_access_key</code> from your <code class=\"language-text\">AWS IAM</code>. <br></p>\n<p>Once you upload an image to <code class=\"language-text\">AWS S3</code>, it provides you with an uri specific to the image by adding the image file name to the end of the <code class=\"language-text\">S3 bucket uri</code>. So if you return the uri to your client, the client will send a request to your server with the uri to save the information into your database</p>","fields":{"slug":"/posts/Django-upload-image-to-aws-s3","tagSlugs":["/tag/django/","/tag/aws/"]},"frontmatter":{"date":"2019-08-07T22:27:37.121Z","description":"How to upload an image to AWS S3 using Django","tags":["django","aws"],"title":"Django - Upload Image to AWS S3"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/Django-upload-image-to-aws-s3"}}}